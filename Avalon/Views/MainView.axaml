<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Avalon.ViewModels"
			 xmlns:extensions="clr-namespace:Material.Styles.Controls.Extensions"
             mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="800"
             x:Class="Avalon.Views.MainView"
			 xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
			 
             x:DataType="vm:MainViewModel">

	<Design.DataContext>
		<!-- This only sets the DataContext for the previewer in an IDE,
         to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
		<vm:MainViewModel />
  </Design.DataContext>


	
			<Grid Name ="MainGrid" ColumnDefinitions="*,0,0" RowDefinitions="35,30,*" Margin="5">

				<DockPanel Width="190" VerticalAlignment="Top" HorizontalAlignment="Left">
					<Menu DockPanel.Dock="Top">
						<MenuItem Header="File">
							<MenuItem Header="Load" Click="on_load_file" Icon="{materialIcons:MaterialIconExt Kind=File}"/>
							<MenuItem Header="Save" Click="on_save_file_auto" Icon="{materialIcons:MaterialIconExt Kind=ContentSave}"/>
							<MenuItem Header="Save As" Click="on_save_file" Icon="{materialIcons:MaterialIconExt Kind=ContentSaveEdit}"/>
						</MenuItem>
						<MenuItem Header="Add">
							<MenuItem Header="File" Click="on_add_file" Icon="{materialIcons:MaterialIconExt Kind=File}"/>
						</MenuItem>
						<MenuItem Header="Project">
							
							<MenuItem Name="RemoveProjectMenu" Header="Remove" Command="{Binding remove_project}" Icon="{materialIcons:MaterialIconExt Kind=Delete}"/>
						
							<MenuItem Name="NewProjectMenu" Header="New" Icon="{materialIcons:MaterialIconExt Kind=FolderPlus}">
								<TextBox Name="ProjectName" Width="110"/>
								<MenuItem Name="AddProject" Header="Add" Click="on_add_project"/>
							</MenuItem>
							
							<MenuItem Name="RenameMenu" Header="Rename" Icon="{materialIcons:MaterialIconExt Kind=Rename}">
								<TextBox Name="NewProjectName" Width="160" FlowDirection="LeftToRight"/>
								<MenuItem Name="RenameProjectMenu" Header="Rename" Click="on_rename_project"/>
							</MenuItem>

							<MenuItem Name="FetchMetadata" Header="Fetch MD" Click="on_fetch_full_meta" Icon="{materialIcons:MaterialIconExt Kind=Database}"/>
						</MenuItem>
					</Menu>
					<TextBlock/>
				</DockPanel>

					<StackPanel Grid.Row="0" Grid.ColumnSpan="3" Orientation="Vertical" Spacing="10" Margin="0">
						<Label Name="StatusLabel" Height="40" Width="250" HorizontalContentAlignment="Center" IsHitTestVisible="False" FontStyle="Italic" Foreground="Gray" Padding="10"/>
					</StackPanel>


				
					<StackPanel Grid.Row="0" Grid.ColumnSpan="3" Orientation="Horizontal" Margin="210,2,0,0">
						<ProgressBar Name="ProgressBar" Width="200" Value="{Binding Status}" VerticalAlignment="Center"/>
						<Label Name="ProgressStatus" Width="200" Height="40" VerticalContentAlignment="Center" IsHitTestVisible="False" FontStyle="Italic" Foreground="Gray" Padding="10"/>
					</StackPanel>

				<StackPanel Grid.Row="1" Grid.ColumnSpan="1" Orientation="Vertical">
					<StackPanel Margin="8 -1 0 0" Orientation="Horizontal">
						<materialIcons:MaterialIcon Grid.Column="0" Kind="Folder" Foreground="Gray" Width="25" Height="15"/>
						<TextBlock Text="{Binding ProjectMessage}" Foreground="Gray" FontStyle="Italic"/>
					</StackPanel>
					<StackPanel Margin="8 0 0 0" Orientation="Horizontal">
						<materialIcons:MaterialIcon Grid.Column="0" Kind="File" Foreground="Gray" Width="25" Height="15"/>
						<TextBlock Text="{Binding CurrentFile.Namn}" Foreground="Gray" FontStyle="Italic"/>
					</StackPanel>
				</StackPanel>
				

		
				
					<StackPanel Grid.Row="1" Grid.ColumnSpan="3" Orientation="Horizontal" FlowDirection="RightToLeft" Spacing="10" Margin="5">
						
						<Button Name="SelectedType" Width="130" Theme="{DynamicResource MaterialButtonBase}" Click="Border_PointerPressed">
							<Button.Content>
								<Grid ColumnDefinitions="30,*,30" FlowDirection="LeftToRight" Width="130">
									<materialIcons:MaterialIcon Grid.Column="0" Kind="FolderQuestion" Width="20" Height="20"/>
									<Label Grid.Column="1" Content="{Binding CurrentProject.Typefilter}" HorizontalAlignment="Center"/>
									<Label Grid.Column="2" Content="⮟" HorizontalAlignment="Left"/>
								</Grid>
							</Button.Content>
							<Button.Flyout>
								<Flyout FlyoutPresenterClasses="mySpecialClass" HorizontalOffset="-4" VerticalOffset="0" Placement="Bottom" ShowMode="TransientWithDismissOnPointerMoveAway">
									<StackPanel>
										<ListBox Name="TypeList" ItemsSource="{Binding CurrentProject.Filetypes}" Height="300" Width="130" FlowDirection="LeftToRight"/>
									</StackPanel>
								</Flyout>
							</Button.Flyout>
						</Button>
						
						<Button Name="SelectedProject" Width="150" Theme="{DynamicResource MaterialButtonBase}" Click="Border_PointerPressed" FlowDirection="LeftToRight">
							<Button.Content>
								<Grid ColumnDefinitions="30,*,30" FlowDirection="LeftToRight" Width="150">
									<materialIcons:MaterialIcon Grid.Column="0" Kind="Folder" Width="20" Height="20"/>
									<Label Grid.Column="1" Content="{Binding CurrentProject.Namn}" HorizontalAlignment="Center"/>
									<Label Grid.Column="2" Content="⮟" HorizontalAlignment="Left"/>
								</Grid>
							</Button.Content>
							<Button.Flyout>
								<Flyout FlyoutPresenterClasses="mySpecialClass" HorizontalOffset="4" VerticalOffset="0" Placement="Bottom" ShowMode="TransientWithDismissOnPointerMoveAway">
									<StackPanel Orientation="Vertical">
										<ListBox Name="ProjectList" ItemsSource="{Binding ProjectsModel.ProjectList}" Height="300" Width="130" FlowDirection="LeftToRight"/>
									</StackPanel>
								</Flyout>
							</Button.Flyout>
						</Button>	
							
						<Button Name="Columns" Width="150" Theme="{DynamicResource MaterialButtonBase}" Click="Border_PointerPressed">
							<Grid ColumnDefinitions="30,*,30" FlowDirection="LeftToRight" Width="150">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="Database" Width="20" Height="20"/>
								<Label Grid.Column="1" Content="Metadata" HorizontalAlignment="Center"/>
								<Label Grid.Column="2" Content="⮟" HorizontalAlignment="Left"/>
							</Grid>
							<Button.Flyout>
								<Flyout FlyoutPresenterClasses="mySpecialClass" HorizontalOffset="-4" VerticalOffset="0" Placement="Bottom" ShowMode="TransientWithDismissOnPointerMoveAway">
									<ListBox Name="ColumnList" Height="450" Width="150" FlowDirection="LeftToRight" >
										<ListBoxItem Height="30"><CheckBox Content="Name"			Tag="0"		Name="Column0"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Filtyp"			Tag="1"		Name="Column1"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Uppdrag"		Tag="2"		Name="Column2"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Tagg"			Tag="3"		Name="Column3"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Färg"			Tag="4"		Name="Column4"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Handling"		Tag="5"		Name="Column5"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Status"			Tag="6"		Name="Column6"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Datum"			Tag="7"		Name="Column7"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Ritningstyp"	Tag="8"		Name="Column8"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Beskrivning 1"	Tag="9"		Name="Column9"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Beskrivning 2"	Tag="10"	Name="Column10"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Beskrivning 3"  Tag="11"	Name="Column11"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Beskrivning 4"	Tag="12"	Name="Column12"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Revidering"		Tag="13"	Name="Column13"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
										<ListBoxItem Height="30"><CheckBox Content="Sökväg"			Tag="14"	Name="Column14"	Height="30"		Checked="ColumnCheck" Unchecked="ColumnUncheck"/></ListBoxItem>
									</ListBox>
								</Flyout>
							</Button.Flyout>
						</Button>

						<Button Name="InfoText" Width="130" Theme="{DynamicResource MaterialButtonBase}" Click="Border_PointerPressed">
							<Grid ColumnDefinitions="30,*,30" FlowDirection="LeftToRight" Width="130">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="NoteText" Width="20" Height="20"/>
								<Label Grid.Column="1" Content="Notepad" HorizontalAlignment="Center"/>
								<Label Grid.Column="2" Content="⮟" HorizontalAlignment="Left"/>
							</Grid>
							<Button.Flyout>
								<Flyout FlyoutPresenterClasses="mySpecialClass" HorizontalOffset="211" VerticalOffset="10" Placement="Bottom" ShowMode="TransientWithDismissOnPointerMoveAway">
									<TextBox Text="{Binding CurrentProject.Notes}" InnerLeftContent="   " InnerRightContent="   " AcceptsReturn="True" AcceptsTab="True"
											 Width="560" FontSize="14" FontWeight="Medium" Height="500" FlowDirection="LeftToRight" IsEnabled="True">

									</TextBox>
									
								</Flyout>
							</Button.Flyout>
						</Button>

						<ToggleSwitch Name="PreviewToggle" Margin="10,0,0,0"/>
						<materialIcons:MaterialIcon Name="EyeOnIcon" Kind="Eye" Width="20" Height="20" IsVisible="False"/>
						<materialIcons:MaterialIcon Name="EyeOffIcon" Kind="EyeOff" Width="20" Height="20"/>

						<ToggleSwitch Name="ThemeToggle" Margin="10,0,0,0" Checked="on_theme_light" Unchecked="on_theme_dark" />
						<materialIcons:MaterialIcon Kind="ThemeLightDark" Width="20" Height="20"/>

						<ToggleSwitch Name="Lockedstatus" Margin="10,0,0,0" VerticalAlignment="Center"/>
						<materialIcons:MaterialIcon Name="LockIcon" Kind="Lock" Width="20" Height="20"/>
						<materialIcons:MaterialIcon Name="UnlockedIcon" Kind="LockOpenVariant" Width="20" Height="20" IsVisible="False"/>

					</StackPanel>

					<DataGrid Name="FileGrid" Grid.Row="2" Margin="5" Padding="0" ItemsSource="{Binding CurrentProject.FilteredFiles}" RowHeight="22" SelectionMode="Extended" VerticalScrollBarVisibility="Visible"
							  AutoGenerateColumns="False" IsReadOnly="True" GridLinesVisibility="Vertical" BorderThickness="1" BorderBrush="Gray" LoadingRow="DataGrid_OnLoadingRow" CanUserReorderColumns="true">
					
						<DataGrid.Columns>
							<DataGridTextColumn Binding="{Binding Namn, Mode=OneWay}"				Header="Namn"           Width="Auto" MinWidth="120" FontFamily="UbuntuMono"/>
							<DataGridTextColumn Binding="{Binding Filtyp, Mode=OneWay}"				Header="Filtyp"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Uppdrag, Mode=OneWay}"			Header="Uppdrag"		Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							
							<DataGridTextColumn Binding="{Binding Tagg, Mode=OneWay}"				Header="Tagg"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Färg, Mode=OneWay}"				Header="Färg"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>

							<DataGridTextColumn Binding="{Binding Handling, Mode=OneWay}"			Header="Handling"	   	Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Status, Mode=OneWay}"				Header="Status"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Datum, Mode=OneWay}"				Header="Datum"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Ritningstyp, Mode=OneWay}"		Header="Ritningstyp"	Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
						
							<DataGridTextColumn Binding="{Binding Beskrivning1, Mode=OneWay}"		Header="Beskrivning 1"  Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Beskrivning2, Mode=OneWay}"		Header="Beskrivning 2"  Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Beskrivning3, Mode=OneWay}"		Header="Beskrivning 3"  Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Beskrivning4, Mode=OneWay}"		Header="Beskrivning 4"  Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
							<DataGridTextColumn Binding="{Binding Revidering, Mode=OneWay}"			Header="Revidering"		Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>

							
							<DataGridTextColumn Binding="{Binding Sökväg, Mode=OneWay}"				Header="Sökväg"			Width="Auto" MinWidth="120" FontFamily="Ubuntu"/>
						</DataGrid.Columns>
						<DataGrid.ContextMenu>
							<ContextMenu Name="Menu">
								<MenuItem Name="OpenMenu" Header="Open" Icon="{materialIcons:MaterialIconExt Kind=File}">
									<MenuItem Name="OpenFileMenu" Header="Open File" Click="OnMenuOpen"/>
									<MenuItem Name="OpenPathMenu" Header="Open Path" Click="on_open_path"/>
									<MenuItem Name="OpenMetaMenu" Header="Open Metafile" Click="on_open_metafile"/>
									<MenuItem Name="OpenDwgMenu" Header="Open Dwg" Click="on_open_dwg"/>
								</MenuItem>
								<MenuItem Name="MetaMenu" Header="Metadata" Icon="{materialIcons:MaterialIconExt Kind=Database}">
									<MenuItem Name="FetchSingleMetadataMenu" Header="Fetch" Click="on_fetch_single_meta"/>
									<MenuItem Name="ClearMetaMenu" Header="Clear" Click="on_clear_meta"/>
								</MenuItem>
								
								<MenuItem Name="ColorMainMenu" Header="Color Tag" Background="Blue" Icon="{materialIcons:MaterialIconExt Kind=PaintBucket}">
									<MenuItem Name="WhiteMenu" Header="None" Tag ="" Click="EditColor"/>
									<MenuItem Name="YellowMenu" Header="⬛⬛⬛⬛" Foreground="#646424" Tag ="Yellow" Click="EditColor"/>
									<MenuItem Name="OrangeMenu" Header="⬛⬛⬛⬛" Foreground="#643e24" Tag ="Orange" Click="EditColor"/>
									<MenuItem Name="BrownMenu" Header="⬛⬛⬛⬛" Foreground="#3e3124" Tag ="Brown" Click="EditColor"/>
									<MenuItem Name="GreenMenu" Header="⬛⬛⬛⬛" Foreground="#244a24" Tag ="Green" Click="EditColor"/>
									<MenuItem Name="BlueMenu" Header="⬛⬛⬛⬛" Foreground="#243e64" Tag ="Blue" Click="EditColor"/>
									<MenuItem Name="RedMenu" Header="⬛⬛⬛⬛" Foreground="#642424" Tag ="Red" Click="EditColor"/>
									<MenuItem Name="MagentaMenu" Header="⬛⬛⬛⬛" Foreground="#57244a" Tag ="Magenta" Click="EditColor"/>
								</MenuItem>
								<MenuItem Name="TagMenu" Header="User Tag" Icon="{materialIcons:MaterialIconExt Kind=Tag}">
									<TextBox Name="TagMenuInput" Width="160" Text="{Binding user_tag}"/>
									<MenuItem Name="TagMenuAdd" Header="Add Tag" Click="on_add_tag" FlowDirection="LeftToRight"/>
									<MenuItem Name="TagMenuClear" Header="Clear Tag" Click="on_clear_tag"/>
								</MenuItem>
								<MenuItem Name="TypeMenu" Header="Filetype" Icon="{materialIcons:MaterialIconExt Kind=FolderQuestion}">
									<MenuItem Header="None" Tag ="" Click="EditType"/>
									<MenuItem Header="Drawing" Tag ="Drawing" Click="EditType"/>
									<MenuItem Header="Document" Tag ="Document" Click="EditType"/>
									<MenuItem Header="Handbook" Tag ="Handbook" Click="EditType"/>
									<MenuItem Header="Standard" Tag ="Standard" Click="EditType"/>
									<MenuItem Header="Other" Tag ="Other" Click="EditType"/>
								</MenuItem>

								<MenuItem Name="CopyMenu" Header="Copy" Icon="{materialIcons:MaterialIconExt Kind=ContentCopy}">
									<MenuItem Name="FilenameCopyMenu" Header="Filename" Click="on_copy_filename"/>
									<MenuItem Name="ListviewCopyMenu" Header="Listview" Click="on_copy_listview"/>
								</MenuItem>

								<MenuItem Name="ClearAllMenu" Header="Clear Tags" Click="on_clear_files" Icon="{materialIcons:MaterialIconExt Kind=TagRemove}"/>

								<MenuItem Name="RemoveFileMenu" Header="Remove File" Click="on_remove_files" Icon="{materialIcons:MaterialIconExt Kind=Delete}"/>
							</ContextMenu>
						</DataGrid.ContextMenu>
					</DataGrid>
			
				<GridSplitter Grid.Column="1" Grid.Row="2" Background="Transparent" ResizeDirection="Columns"/>

				<Grid ClipToBounds="True" RowDefinitions="*,40" Grid.Column="2" Grid.Row="2" >

					<Viewbox Grid.Row="0" Name="Previewer" Stretch="Uniform" StretchDirection="Both" Margin="-10">						
						<Panel Background="White" Margin="20">
							<StackPanel Orientation="Horizontal">
							<Image x:Name="Preview" Source="{Binding ImageFromBinding}"/>
							<Image x:Name="Preview2" Source="{Binding ImageFromBinding2}" IsVisible="{Binding pw_dualmode}"/>
							</StackPanel>
						</Panel>
					</Viewbox>
	
					<StackPanel Grid.Row="1" FlowDirection="RightToLeft" Orientation="Vertical" Margin="5">
						<StackPanel Width="700" Orientation="Horizontal" Background="Transparent" Spacing="5">
							
							<ToggleSwitch Name="DualMode" Command="{Binding toggle_pw_mode}" Click="on_toggle_dualmode"/>
							<materialIcons:MaterialIcon Kind="FileDocument" Width="20" Height="20" IsVisible="{Binding !pw_dualmode}"/>
							<materialIcons:MaterialIcon Kind="BookOpenPageVariant" Width="20" Height="20" IsVisible="{Binding pw_dualmode}"/>

							<Slider Name="PreviewQuality" FlowDirection="LeftToRight" Width="90" Margin="10" Minimum="1" Maximum="8" Value="3" IsSnapToTickEnabled="True" SmallChange="1" TickFrequency="1"/>
							<materialIcons:MaterialIcon Kind="ImageSizeSelectActual" Width="20" Height="20"/>
							
							<Button MinWidth="35" BorderThickness="0" Click="reset_preview_transform">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="StretchToPageOutline" Width="20" Height="20"/>
							</Button>

							<Button Name="ScrollMode" MinWidth="35" BorderThickness="0" Background="Orange" Click="on_scroll_mode">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="ScrollText" Width="20" Height="20"/>
							</Button>
							
							<Button Name="ZoomMode" MinWidth="35" BorderThickness="0" Click="on_zoom_mode">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="ZoomIn" Width="20" Height="20"/>
							</Button>
							
							<Button  MinWidth="35" BorderThickness="0" Command="{Binding next_preview_page}">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="SkipPrevious" Width="20" Height="20"/>
							</Button>
								
							<Button MinWidth="35" BorderThickness="0" Command="{Binding previous_preview_page}">
								<materialIcons:MaterialIcon Grid.Column="0" Kind="SkipNext" Width="20" Height="20"/>
							</Button>
							
							<Label Content="{Binding pw_pagecount_view}" VerticalAlignment="Center"/>
							<Label Content="/" VerticalAlignment="Center"/>
							<Label Content="{Binding pw_pagenr_view}" Width="30" VerticalAlignment="Center"/>
							<Slider Name="ScrollSlider" FlowDirection="LeftToRight" Width="200" Margin="10" Minimum="1" IsSnapToTickEnabled="True" TickFrequency="1" Maximum="{Binding pw_pagecount_view}" Value="{Binding pw_pagenr_view}"/>
							
							
						</StackPanel>
					</StackPanel>
				</Grid>

				
			</Grid>
</UserControl>
 